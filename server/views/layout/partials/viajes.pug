.row.proximos-viajes
    each viaje, index in viajes
        .col-md-6.col-lg-4.mb-4(data-aos="fade-up", data-aos-delay=`${(index % 3) * 100 + 300}`)
            article.card(role="article", aria-label=`Viaje a ${viaje.titulo}`)
                //- Imagen con atribución
                .imagen-viaje
                    img.img-fluid(
                        src=viaje.imagen,
                        alt=viaje.imagenData ? viaje.imagenData.altDescription : `Destino turístico: ${viaje.titulo}`,
                        loading="lazy",
                        width="400",
                        height="300",
                        style=viaje.imagenData && viaje.imagenData.color ? `background-color: ${viaje.imagenData.color}` : '',
                        onerror="if(this.src!='/img/destinos_grecia.jpg'){this.src='/img/destinos_grecia.jpg'}"
                    )

                    //- Badges de estado
                    .trip-badges
                        //- Badge de urgencia (últimos lugares)
                        if viaje.disponibles <= 5 && viaje.disponibles > 0
                            span.trip-badge.badge-warning-custom
                                i.fas.fa-exclamation-triangle
                                span ¡#{viaje.disponibles} #{viaje.disponibles === 1 ? 'lugar' : 'lugares'}!

                        //- Badge Nuevo
                        if viaje.badges && viaje.badges.nuevo
                            span.trip-badge.badge-nuevo
                                i.fas.fa-star
                                span Nuevo

                        //- Badge Descuento
                        if viaje.badges && viaje.badges.descuento
                            span.trip-badge.badge-descuento
                                i.fas.fa-tag
                                span -#{viaje.badges.descuentoPorcentaje}%

                        //- Badge Destacado
                        if viaje.badges && viaje.badges.destacado
                            span.trip-badge.badge-destacado
                                i.fas.fa-fire
                                span Destacado

                    //- Atribución del fotógrafo (requerido por Unsplash)
                    if viaje.imagenData && viaje.imagenData.photographer !== 'Escápate Conmigo'
                        .image-credit
                            small
                                | Foto por
                                a(href=viaje.imagenData.photographerUrl, target="_blank", rel="noopener noreferrer")
                                    = viaje.imagenData.photographer
                                |  en
                                a(href="https://unsplash.com", target="_blank", rel="noopener noreferrer") Unsplash

                .card-body
                    h2.h4= viaje.titulo
                    p
                        i.fas.fa-calendar-alt(aria-hidden="true")
                        span.sr-only Fechas:
                        |  #{viaje.fecha_ida} - #{viaje.fecha_vuelta}
                    p
                        i.fas.fa-dollar-sign(aria-hidden="true")
                        span.sr-only Precio:
                        |  #{viaje.precio}
                    - var descripcionCorta = viaje.descripcion.length > 120 ? viaje.descripcion.substr(0, 120) + '...' : viaje.descripcion
                    p.card-text= descripcionCorta
                    a(
                        href=`viajes/${viaje.id}`,
                        class="btn btn-success btn-block",
                        aria-label=`Ver más información sobre viaje a ${viaje.titulo}`
                    ) Más Información
