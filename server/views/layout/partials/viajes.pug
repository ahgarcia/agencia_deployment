.row.proximos-viajes
    each viaje in viajes
        .col-md-6.col-lg-4.mb-4
            article.card(role="article", aria-label=`Viaje a ${viaje.titulo}`, style="position: relative;")
                //- Imagen con atribución
                .imagen-viaje(style="position: relative;")
                    img(
                        src=viaje.imagen,
                        class="img-fluid",
                        alt=viaje.imagenData ? viaje.imagenData.altDescription : `Destino turístico: ${viaje.titulo}`,
                        loading="lazy",
                        width="400",
                        height="300",
                        style=viaje.imagenData && viaje.imagenData.color ? `background-color: ${viaje.imagenData.color}` : '',
                        onerror="if(this.src!='/img/destinos_grecia.jpg'){this.src='/img/destinos_grecia.jpg'}"
                    )

                    //- Atribución del fotógrafo (requerido por Unsplash)
                    if viaje.imagenData && viaje.imagenData.photographer !== 'Escápate Conmigo'
                        .image-credit(style="position: absolute; bottom: 10px; right: 10px; background: rgba(255,255,255,0.9); padding: 5px 10px; border-radius: 4px; font-size: 11px;")
                            small
                                | Foto por
                                a(href=viaje.imagenData.photographerUrl, target="_blank", rel="noopener noreferrer", style="color: #333; text-decoration: none;")
                                    = viaje.imagenData.photographer
                                |  en
                                a(href="https://unsplash.com", target="_blank", rel="noopener noreferrer", style="color: #333; text-decoration: none;") Unsplash

                .card-body
                    h2.h4=viaje.titulo
                    p
                        i.fas.fa-calendar-alt(aria-hidden="true")
                        span.sr-only Fechas:
                        |  #{viaje.fecha_ida} - #{viaje.fecha_vuelta}
                    p
                        i.fas.fa-dollar-sign(aria-hidden="true")
                        span.sr-only Precio:
                        |  #{viaje.precio}
                    p= viaje.descripcion.substr(0,100) + '...'
                    a(
                        href=`viajes/${viaje.id}`,
                        class="btn btn-success btn-block",
                        aria-label=`Ver más información sobre viaje a ${viaje.titulo}`
                    ) Más Información
