extends ../layout/index

block scripts
    script(src="/js/filtros.js", defer)

block contenido
    main.container.mt-5
        //- Breadcrumbs
        nav(aria-label="Breadcrumb")
            ol.breadcrumb
                li.breadcrumb-item
                    a(href="/") Inicio
                li.breadcrumb-item.active(aria-current="page") Viajes

        h1.text-center.mb-4(data-aos="fade-down") #{pagina}

        //- SecciÃ³n de Filtros
        .filtros-viajes.mb-5(data-aos="fade-up", data-aos-delay="100")
            .row
                .col-12
                    .filtros-card
                        .filtros-header
                            h5
                                i.fas.fa-filter.mr-2
                                | Filtrar viajes
                            button#btnLimpiarFiltros.btn-limpiar-filtros(type="button")
                                i.fas.fa-times-circle.mr-1
                                | Limpiar filtros

                        .filtros-body
                            form#formFiltros.row.g-3
                                //- Filtro por Tipo de Destino
                                .col-md-4.col-lg-3
                                    label.filtro-label(for="tipo_destino")
                                        i.fas.fa-map-marked-alt.mr-1
                                        | Tipo de Destino
                                    select#tipo_destino.form-control.filtro-select(name="tipo_destino")
                                        option(value="todos", selected=!filtrosAplicados.tipo_destino) Todos los destinos
                                        option(value="beach", selected=filtrosAplicados.tipo_destino === 'beach') ðŸ–ï¸ Playa
                                        option(value="city", selected=filtrosAplicados.tipo_destino === 'city') ðŸ™ï¸ Ciudad
                                        option(value="archaeological", selected=filtrosAplicados.tipo_destino === 'archaeological') ðŸ›ï¸ ArqueolÃ³gico
                                        option(value="colonial", selected=filtrosAplicados.tipo_destino === 'colonial') ðŸ° Colonial
                                        option(value="nature", selected=filtrosAplicados.tipo_destino === 'nature') ðŸŒ² Naturaleza
                                        option(value="tourism", selected=filtrosAplicados.tipo_destino === 'tourism') âœˆï¸ Turismo

                                //- Filtro por Mes de Salida
                                .col-md-4.col-lg-3
                                    label.filtro-label(for="mes")
                                        i.fas.fa-calendar-alt.mr-1
                                        | Mes de Salida
                                    select#mes.form-control.filtro-select(name="mes")
                                        option(value="", selected=!filtrosAplicados.mes) Todos los meses
                                        option(value="1", selected=filtrosAplicados.mes === 1) Enero
                                        option(value="2", selected=filtrosAplicados.mes === 2) Febrero
                                        option(value="3", selected=filtrosAplicados.mes === 3) Marzo
                                        option(value="4", selected=filtrosAplicados.mes === 4) Abril
                                        option(value="5", selected=filtrosAplicados.mes === 5) Mayo
                                        option(value="6", selected=filtrosAplicados.mes === 6) Junio
                                        option(value="7", selected=filtrosAplicados.mes === 7) Julio
                                        option(value="8", selected=filtrosAplicados.mes === 8) Agosto
                                        option(value="9", selected=filtrosAplicados.mes === 9) Septiembre
                                        option(value="10", selected=filtrosAplicados.mes === 10) Octubre
                                        option(value="11", selected=filtrosAplicados.mes === 11) Noviembre
                                        option(value="12", selected=filtrosAplicados.mes === 12) Diciembre

                                //- Filtro por Disponibilidad
                                .col-md-4.col-lg-3
                                    label.filtro-label(for="disponibilidad")
                                        i.fas.fa-check-circle.mr-1
                                        | Disponibilidad
                                    select#disponibilidad.form-control.filtro-select(name="disponibilidad")
                                        option(value="", selected=!filtrosAplicados.disponibilidad) Todas
                                        option(value="disponible", selected=filtrosAplicados.disponibilidad === 'disponible') âœ… Disponible
                                        option(value="ultimos", selected=filtrosAplicados.disponibilidad === 'ultimos') âš ï¸ Ãšltimos lugares
                                        option(value="agotado", selected=filtrosAplicados.disponibilidad === 'agotado') âŒ Agotado

                                //- BotÃ³n Aplicar
                                .col-md-12.col-lg-3.d-flex.align-items-end
                                    button#btnAplicarFiltros.btn-aplicar-filtros(type="submit")
                                        i.fas.fa-search.mr-2
                                        | Aplicar filtros

        //- InformaciÃ³n de paginaciÃ³n
        if totalViajes > 0
            p.text-muted.text-center.mb-4(data-aos="fade-up", data-aos-delay="200")
                | Mostrando #{viajes.length} de #{totalViajes} destinos

        //- Estado vacÃ­o
        if viajes.length === 0
            .empty-state.text-center(data-aos="zoom-in")
                i.fas.fa-plane-slash.fa-4x.mb-3
                h3 No hay viajes disponibles
                p.text-muted En este momento no tenemos destinos disponibles. Vuelve pronto para descubrir nuevas aventuras.
        else
            include ../layout/partials/viajes

        //- Controles de paginaciÃ³n
        if totalPaginas > 1
            nav.mt-5(aria-label="NavegaciÃ³n de pÃ¡ginas", data-aos="fade-up", data-aos-delay="400")
                ul.pagination.justify-content-center
                    //- BotÃ³n Anterior
                    li.page-item(class=paginaActual === 1 ? 'disabled' : '')
                        if paginaActual === 1
                            span.page-link(tabindex="-1", aria-disabled="true") Anterior
                        else
                            a.page-link(href=`/viajes?page=${paginaActual - 1}`, aria-label="PÃ¡gina anterior") Anterior

                    //- NÃºmeros de pÃ¡gina
                    - var inicioRango = Math.max(1, paginaActual - 2)
                    - var finRango = Math.min(totalPaginas, paginaActual + 2)

                    //- Primera pÃ¡gina si no estÃ¡ en el rango
                    if inicioRango > 1
                        li.page-item
                            a.page-link(href="/viajes?page=1") 1
                        if inicioRango > 2
                            li.page-item.disabled
                                span.page-link ...

                    //- PÃ¡ginas en el rango
                    - for (var i = inicioRango; i <= finRango; i++)
                        li.page-item(class=i === paginaActual ? 'active' : '')
                            if i === paginaActual
                                span.page-link
                                    = i
                                    span.sr-only (actual)
                            else
                                a.page-link(href=`/viajes?page=${i}`)= i

                    //- Ãšltima pÃ¡gina si no estÃ¡ en el rango
                    if finRango < totalPaginas
                        if finRango < totalPaginas - 1
                            li.page-item.disabled
                                span.page-link ...
                        li.page-item
                            a.page-link(href=`/viajes?page=${totalPaginas}`)= totalPaginas

                    //- BotÃ³n Siguiente
                    li.page-item(class=paginaActual === totalPaginas ? 'disabled' : '')
                        if paginaActual === totalPaginas
                            span.page-link(tabindex="-1", aria-disabled="true") Siguiente
                        else
                            a.page-link(href=`/viajes?page=${paginaActual + 1}`, aria-label="PÃ¡gina siguiente") Siguiente